<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Entity Framework | DMIT-2018 Student Notes</title>
    <meta name="description" content="Intermediate Application Development">
    
    
    <link rel="preload" href="/assets/css/0.styles.912ec5d4.css" as="style"><link rel="preload" href="/assets/js/app.83fe29d4.js" as="script"><link rel="preload" href="/assets/js/15.c996a126.js" as="script"><link rel="prefetch" href="/assets/js/1.7e242e83.js"><link rel="prefetch" href="/assets/js/2.72f922de.js"><link rel="prefetch" href="/assets/js/3.da887197.js"><link rel="prefetch" href="/assets/js/4.0ccfc5cf.js"><link rel="prefetch" href="/assets/js/5.3a64f479.js"><link rel="prefetch" href="/assets/js/6.f2aaf3a8.js"><link rel="prefetch" href="/assets/js/7.a881ad9b.js"><link rel="prefetch" href="/assets/js/8.1598c844.js"><link rel="prefetch" href="/assets/js/9.f1025517.js"><link rel="prefetch" href="/assets/js/10.cff2f355.js"><link rel="prefetch" href="/assets/js/11.ffcc25de.js"><link rel="prefetch" href="/assets/js/12.4ea27a3b.js"><link rel="prefetch" href="/assets/js/13.4f6b2530.js"><link rel="prefetch" href="/assets/js/14.56453d00.js"><link rel="prefetch" href="/assets/js/16.44a2e745.js"><link rel="prefetch" href="/assets/js/17.8970bd0b.js"><link rel="prefetch" href="/assets/js/18.7b817173.js"><link rel="prefetch" href="/assets/js/19.6bb596b2.js"><link rel="prefetch" href="/assets/js/20.e6cd5261.js"><link rel="prefetch" href="/assets/js/21.4c30a4cd.js"><link rel="prefetch" href="/assets/js/22.117269e1.js"><link rel="prefetch" href="/assets/js/23.696a9d7e.js"><link rel="prefetch" href="/assets/js/24.b7681e93.js"><link rel="prefetch" href="/assets/js/25.37528cf3.js"><link rel="prefetch" href="/assets/js/26.01f4eb26.js"><link rel="prefetch" href="/assets/js/27.1dcf8670.js"><link rel="prefetch" href="/assets/js/28.ccbc57d4.js"><link rel="prefetch" href="/assets/js/29.a2c81822.js"><link rel="prefetch" href="/assets/js/30.735cd07e.js"><link rel="prefetch" href="/assets/js/31.47227a2d.js"><link rel="prefetch" href="/assets/js/32.588a8dc4.js"><link rel="prefetch" href="/assets/js/33.f66e4bc6.js"><link rel="prefetch" href="/assets/js/34.982c7768.js"><link rel="prefetch" href="/assets/js/35.f704c864.js"><link rel="prefetch" href="/assets/js/36.816b689e.js"><link rel="prefetch" href="/assets/js/37.5ecc11eb.js"><link rel="prefetch" href="/assets/js/38.7a2a6418.js"><link rel="prefetch" href="/assets/js/39.392d984a.js"><link rel="prefetch" href="/assets/js/40.c0bf58cf.js"><link rel="prefetch" href="/assets/js/41.3b3f064c.js"><link rel="prefetch" href="/assets/js/42.1ea13a32.js"><link rel="prefetch" href="/assets/js/43.f5284ef3.js"><link rel="prefetch" href="/assets/js/44.4a4a680e.js"><link rel="prefetch" href="/assets/js/45.5166a41d.js"><link rel="prefetch" href="/assets/js/46.724fa66d.js"><link rel="prefetch" href="/assets/js/47.bb932031.js"><link rel="prefetch" href="/assets/js/48.ea02ae81.js"><link rel="prefetch" href="/assets/js/49.f8033040.js"><link rel="prefetch" href="/assets/js/50.1d19da78.js"><link rel="prefetch" href="/assets/js/51.0b4dbb32.js"><link rel="prefetch" href="/assets/js/52.0380bbcb.js"><link rel="prefetch" href="/assets/js/53.6a18355f.js"><link rel="prefetch" href="/assets/js/54.ae0fd5b2.js"><link rel="prefetch" href="/assets/js/55.f2ba8e9a.js"><link rel="prefetch" href="/assets/js/56.439dbebb.js"><link rel="prefetch" href="/assets/js/57.2f8cd9ff.js"><link rel="prefetch" href="/assets/js/58.cce9f5ee.js"><link rel="prefetch" href="/assets/js/59.405985c2.js"><link rel="prefetch" href="/assets/js/60.38e930cf.js"><link rel="prefetch" href="/assets/js/61.1cf51898.js"><link rel="prefetch" href="/assets/js/62.f21228c4.js"><link rel="prefetch" href="/assets/js/63.f4bdbc82.js"><link rel="prefetch" href="/assets/js/64.701467a1.js"><link rel="prefetch" href="/assets/js/65.5d83db54.js"><link rel="prefetch" href="/assets/js/66.66657a93.js"><link rel="prefetch" href="/assets/js/67.7c6c5d76.js"><link rel="prefetch" href="/assets/js/68.902b8c00.js"><link rel="prefetch" href="/assets/js/69.a09e3c42.js"><link rel="prefetch" href="/assets/js/70.cca0c4c1.js"><link rel="prefetch" href="/assets/js/71.a865d59f.js"><link rel="prefetch" href="/assets/js/72.0854813b.js"><link rel="prefetch" href="/assets/js/73.bca6a041.js"><link rel="prefetch" href="/assets/js/74.cf3d8656.js"><link rel="prefetch" href="/assets/js/75.40638d50.js"><link rel="prefetch" href="/assets/js/76.70c7dced.js"><link rel="prefetch" href="/assets/js/77.48636883.js"><link rel="prefetch" href="/assets/js/78.43de8202.js"><link rel="prefetch" href="/assets/js/79.c1e3144b.js"><link rel="prefetch" href="/assets/js/80.9c8e9128.js"><link rel="prefetch" href="/assets/js/81.541e35d0.js"><link rel="prefetch" href="/assets/js/82.e4f2e7bb.js"><link rel="prefetch" href="/assets/js/83.2b0842e0.js"><link rel="prefetch" href="/assets/js/84.399d52ef.js"><link rel="prefetch" href="/assets/js/85.66bce392.js"><link rel="prefetch" href="/assets/js/86.736b68fb.js"><link rel="prefetch" href="/assets/js/87.963eaa1b.js"><link rel="prefetch" href="/assets/js/88.3a344f6d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.912ec5d4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DMIT-2018 Student Notes</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/topics/" class="nav-link router-link-active">Notes</a></div><div class="nav-item"><a href="/demos/" class="nav-link">Demos</a></div><div class="nav-item"><a href="https://dmit-2018.github.io/about/slides-installing-sql-server.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MS SQL 2017
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/DMIT-2018/StudentNotes/issues/new" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Issues/Bugs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://moodle.nait.ca" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Moodle
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/topics/" class="nav-link router-link-active">Notes</a></div><div class="nav-item"><a href="/demos/" class="nav-link">Demos</a></div><div class="nav-item"><a href="https://dmit-2018.github.io/about/slides-installing-sql-server.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MS SQL 2017
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/DMIT-2018/StudentNotes/issues/new" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Issues/Bugs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://moodle.nait.ca" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Moodle
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/topics/" class="sidebar-link">Topic Summaries</a></li><li><a href="/topics/dvcs/" class="sidebar-link">Version Control in Software Development</a></li><li><a href="/topics/dvcs/gh4w.html" class="sidebar-link">git Basics</a></li><li><a href="/topics/xml/" class="sidebar-link">XML</a></li><li><a href="/topics/sitemaps/" class="sidebar-link">XML SiteMap</a></li><li><a href="/topics/linq/" class="sidebar-link">LINQ Intro</a></li><li><a href="/topics/linq/lambda.html" class="sidebar-link">Lambdas and Delegates</a></li><li><a href="/topics/entityFramework/" class="active sidebar-link">Entity Framework</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/topics/entityFramework/#coding-entities" class="sidebar-link">Coding Entities</a></li><li class="sidebar-sub-header"><a href="/topics/entityFramework/#database-context" class="sidebar-link">Database Context</a></li><li class="sidebar-sub-header"><a href="/topics/entityFramework/#web-config-and-entity-framework" class="sidebar-link">web.config and Entity Framework</a></li></ul></li><li><a href="/topics/ux/" class="sidebar-link">Intro to UX</a></li><li><a href="/topics/cqrs/" class="sidebar-link">CQRS, POCOs, and DTOs</a></li><li><a href="/topics/aspNet/databound/" class="sidebar-link">Databound Controls</a></li><li><a href="/topics/aspNet/databound/gridviewOverview.html" class="sidebar-link">GridView Overview</a></li><li><a href="/topics/aspNet/databound/gridviewCustomization.html" class="sidebar-link">Customizing a GridView/DetailsView</a></li><li><a href="/topics/aspNet/databound/detailsviewOverview.html" class="sidebar-link">DetailsView Overview</a></li><li><a href="/topics/aspNet/databound/listviewOverview.html" class="sidebar-link">ListView Overview</a></li><li><a href="/topics/aspNet/databound/repeaterOverview.html" class="sidebar-link">Repeater Overview</a></li><li><a href="/topics/aspNet/assortedWebForms.html" class="sidebar-link">Assorted WebForm Topics</a></li><li><a href="/topics/aspNet/userControls.html" class="sidebar-link">User Controls</a></li><li><a href="/topics/aspNet/errorHandling.html" class="sidebar-link">Approaches to Error Handling in ASP.NET</a></li><li><a href="/topics/aspNet/advancedErrorHandling.html" class="sidebar-link">Advanced Error Handling</a></li><li><a href="/topics/reports/ssdt.html" class="sidebar-link">SSDT for VS</a></li><li><a href="/topics/security/" class="sidebar-link">Website Security</a></li><li><a href="/topics/security/aspNetIdentity.html" class="sidebar-link">ASP.NET Identity</a></li><li><a href="/topics/ux/workflows/" class="sidebar-link">Design Patterns and Principles</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="entity-framework"><a href="#entity-framework" aria-hidden="true" class="header-anchor">#</a> Entity Framework</h1> <p>Entity Framework (EF) is an ORM solution from Microsoft that makes querying and modifying database data very simple. The Entity Framework (currently at version 6.1) can be added to your Visual Studio solution through NuGet. (In VS2013, EF is installed as part of the template for ASP.Net Web Forms web sites.)</p> <p>There are certain terms that come up when using Entity Framework. Here are some definitions that can get you started.</p> <dl><dt>Entity</dt> <dd>An Entity is simply a class that is designed to hold data from one row in a database table. One key characteristic of entities is that they have a property for every column in the corresponding database table.</dd> <dt>Navigation Property</dt> <dd>Database tables have relationships, and those can be modelled in Entity Framework through the use of Navigation Properties. A navigation property is simply a property on the entity class that represents a single instance (&quot;to-one&quot; relationship) or a collection of instances (&quot;to-many&quot; relationship) of some other entity.</dd> <dt>Database Context</dt> <dd>A database context class is a class that inherits from <code>DbContext</code>. The database context identifies properties for each entity that is being mapped to a database table. Each property is a <code>DbSet&lt;T&gt;</code> instance, where the <code>&lt;T&gt;</code> is an entity. The <code>DbContext</code> base class along with <code>DbSet&lt;T&gt;</code> give us all the built-in functionality needed to perform CRUD operations on the database.</dd> <dt>Model</dt> <dd>This term refers to the set of entities (and their relationships) that belong to a database context. The term is also used at times to refer specifically to an <code>.edmx</code> file that can be used to visually &quot;draw&quot; the entities and their relationships. In a code-first context, this term simply refers to the entities and their relationships.</dd> <dt>Code-First</dt> <dd>An approach to using the Entity Framework where entity and database context classes are coded directly, rather than being auto-generated based on an <code>.edmx</code> file.</dd> <dt>Model-First</dt> <dd>An approach to using the Entity Framework that emphasizes a visual representation of entities and their relationships. The model-first makes use of an XML file (<code>.edmx</code>) that Visual Studio uses to &quot;draw&quot; the model in a manner similar to an ERD along with definition template (<code>.dt</code>) files to auto-generate the actual entity and database context classes.</dd></dl> <p>Conceptually, Entity Framework is designed around a class-per-database-table approach. That is, for every database table that you want to model in your application, you code a corresponding class (known as an Entity).</p> <p>Along with the entity classes, you application will need a class to serve the core functionality of the DAL. This class is your Database Context, and it must inherit from the <code>DbContext</code> class in the Entity Framework.</p> <p>Part of the power of the Entity Framework is that it can be used with or without an existing database. If the database does not exist, then it can be automatically created from your model when you run your application. Additionally, Entity Framework supports the idea of Migrations, which can be very helpful when dealing with a database model that changes over time.</p> <p>Visual Studio supports two approaches to working with Entity Framework - Code-First and Model-First. Combined with the fact that EF can work with or without a database, that means that there are four distinct ways that you can develop your application with Entity Framework. In this course, our emphasis will be to use a Code-First approach, and although we are using an existing database, we will not be using Visual Studio's capacity to auto-generate the entity and DbContext classes based on the database.</p> <p>There are various online resources on <a href="http://msdn.microsoft.com/en-US/data/ee712907" target="_blank" rel="noopener noreferrer">getting started<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> with Entity Framework that are available through <a href="http://www.asp.net/entity-framework" target="_blank" rel="noopener noreferrer">ASP.Net<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. In the discussion below, we will use and expand upon the Blog and Post example that is demonstrated in the tutorials <a href="http://msdn.microsoft.com/en-us/data/jj193542" target="_blank" rel="noopener noreferrer">&quot;Code First to a New Database&quot;<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="http://msdn.microsoft.com/en-us/data/jj200620" target="_blank" rel="noopener noreferrer">&quot;Code First to an Existing Database&quot;<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. The following ERD shows the database tables used in this discussion.</p> <p><img src="/assets/img/BloggingDB-ERD.b0659442.png" alt="Blogging ERD"></p> <h2 id="coding-entities"><a href="#coding-entities" aria-hidden="true" class="header-anchor">#</a> Coding Entities</h2> <p>Coding an entity is fairly straight-forward. Simply create a class to correspond to a database table, and create a property for each column in the database table.</p> <p>Entity Framework employes a <a href="http://en.wikipedia.org/wiki/Convention_over_configuration" target="_blank" rel="noopener noreferrer">Convention over Configuration<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> approach (see <a href="http://msdn.microsoft.com/en-us/data/jj679962" target="_blank" rel="noopener noreferrer">Code First Conventions<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>). These conventions can be overridden or extended with your own <a href="http://msdn.microsoft.com/en-us/data/jj819164.aspx" target="_blank" rel="noopener noreferrer">custom conventions<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>The configurations are used by Entity Framework to provide mappings between database tables and entities. There are various ways to provide custom mappings. One such way is shown in the article <a href="http://dotnet.dzone.com/articles/entity-framework-5-first-steps" target="_blank" rel="noopener noreferrer">Entity Framework 5 First Steps<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>Entity Framework employs certain <a href="http://msdn.microsoft.com/en-us/data/jj679962" target="_blank" rel="noopener noreferrer">conventions<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> that simplify the process of doing code-first development. One of those has to do with the property names on our entity: As long as the property name matches the name of the column in the database table, EF will map to it by default. For example, the Blog entity below maps to the Blogs table.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Blog</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> BlogId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">string</span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">string</span> Url <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Another convention has to do with modelling primary keys. If your entity has a property with either the name <code>ID</code> or the same name as the class and a suffix of &quot;Id&quot;, then EF will assume that property to be mapping to a primary key in the database table. If the property that is supposed to map to a primary doesn't follow this convention, then you will need to use the <code>[Key]</code> attribute to mark it as the entity's primary key. (See more on &quot;Using Attributes&quot; below)</p> <p>Relationships between entities can also be modelled using properties. In these scenarios, they are referred to as Navigational Properties. It is a good practice to mark these properties with the <a href="http://msdn.microsoft.com/en-us/library/9fkccyh4.aspx" target="_blank" rel="noopener noreferrer"><code>virtual</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> modifier, which allows collections to be lazy-loaded and makes change-tracking more efficient (see <a href="http://stackoverflow.com/a/5599270/2154662" target="_blank" rel="noopener noreferrer">this SO comment<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>). The following code samples show the Blog and Post entities with their navigational properties.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Blog</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> BlogId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">string</span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">string</span> Url <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">virtual</span> ICollection<span class="token operator">&lt;</span>Post<span class="token operator">&gt;</span> Posts <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Post</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> PostId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">string</span> Title <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">string</span> Content <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> BlogId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">virtual</span> <span class="token class-name">Blog</span> Blog <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="using-attributes"><a href="#using-attributes" aria-hidden="true" class="header-anchor">#</a> Using Attributes</h3> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token class-name">Table</span><span class="token punctuation">(</span>Speaker<span class="token punctuation">.</span>TABLENAME<span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Speaker</span> <span class="token punctuation">:</span> <span class="token class-name">BaseModel</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">const</span> <span class="token class-name">String</span> TABLENAME <span class="token operator">=</span> <span class="token string">&quot;Speaker&quot;</span><span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token class-name">Key</span><span class="token punctuation">,</span> <span class="token function">DatabaseGenerated</span><span class="token punctuation">(</span>DatabaseGeneratedOption<span class="token punctuation">.</span>Identity<span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token class-name">Guid</span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token class-name">Required</span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token class-name">MaxLength</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> ErrorMessage <span class="token operator">=</span> <span class="token string">&quot;Name must be 50 characters or less&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">string</span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>There are a number of C# attributes that can be applied to the properties of an entity to help describe how it models the database table (&quot;schema&quot; attributes) and how it should perform validation (effectively mirroring simple CHECK constraints in SQL). Validation attributes are checked when the <code>.SaveChanges()</code> method is called on your database context class. The validation attributes can also be used to help support the user interface in web applications; when used this way, it is often helpful to specify an (optional) error message for the end-user. Entity attributes are discussed in more detail in the <a href="http://msdn.microsoft.com/en-us/data/jj591583" target="_blank" rel="noopener noreferrer">Code First Data Annotations<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> documentation on MSDN, but here are some of the more commonly used annotations.</p> <dl><dt><code>[Key]</code></dt> <dd>Identifies the property as representing the Primary Key in the database. Can be used with the <code>[Column]</code> attribute</dd> <dt><code>[Column]</code></dt> <dd>Used with the <code>[Key]</code> attribute to specify the order of columns when mapping against a composite key in the database table.</dd> <dt><code>[DatabaseGenerated]</code></dt> <dd>Identifies the property as having a value that is controlled by the database (and therefore, not a value that should be &quot;saved&quot; into the corresponding column). This attribute takes a single <a href="http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.schema.databasegeneratedoption(v=vs.110).aspx" target="_blank" rel="noopener noreferrer">DatabaseGeneratedOption<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> value:</dd> <dd><code>Computed</code> - The database generates a value when a row is inserted or updated.</dd> <dd><code>Identity</code> - The database generates a value when a row is inserted.</dd> <dd><code>None</code> - The database does not generate values.</dd> <dt><code>[NotMapped]</code></dt> <dd>Identifies that the property in your entity does not have a corresponding column in the database table. This is useful when you want to create a property whose value is derived from other properties, such as a <code>FullName</code> that is a concatenation of the first and last name.</dd> <dt><code>[ForeignKey]</code></dt> <dd>Identifies the property as acting as a foreign key to another entity/table.</dd> <dt><code>[Index]</code></dt> <dd>TBA</dd> <dt><code>[Required]</code></dt> <dd>(Validation attribute) TBA</dd> <dt><code>[Range]</code></dt> <dd>(Validation attribute) TBA</dd> <dt><code>[StringLength]</code></dt> <dd>(Validation attribute) TBA</dd> <dt><code>[MaxLength]</code></dt> <dd>(Validation attribute) TBA</dd> <dt><code>[Table]</code></dt> <dd>TBA</dd></dl> <h2 id="database-context"><a href="#database-context" aria-hidden="true" class="header-anchor">#</a> Database Context</h2> <p>For the DAL of your application, create a class that inherits from Entity Framework's <code>DbContext</code> class and add a <code>DbSet</code> property for each table that you want to map an entity to. The <code>DbContext</code> class has a method called <code>OnModelCreating</code> that you can override to provide additional instructions for mapping entities to the underlying database as well as to over-ride default naming conventions (as in the following sample where the <code>User</code> class maps its <code>DisplayName</code> property to a column named <code>display_name</code>.)</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">using</span> System<span class="token punctuation">.</span>Data<span class="token punctuation">.</span>Entity<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BloggingContext</span> <span class="token punctuation">:</span> <span class="token class-name">DbContext</span> <span class="token comment">// System.Data.Entity.DbContext</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> DbSet<span class="token operator">&lt;</span>Blog<span class="token operator">&gt;</span> Blogs <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> DbSet<span class="token operator">&lt;</span>Post<span class="token operator">&gt;</span> Posts <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> DbSet<span class="token operator">&lt;</span>User<span class="token operator">&gt;</span> Users <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token keyword">void</span> <span class="token function">OnModelCreating</span><span class="token punctuation">(</span><span class="token class-name">DbModelBuilder</span> modelBuilder<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        modelBuilder<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Entity</span><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">Property</span><span class="token punctuation">(</span>u <span class="token operator">=</span><span class="token operator">&gt;</span> u<span class="token punctuation">.</span>DisplayName<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">HasColumnName</span><span class="token punctuation">(</span><span class="token string">&quot;display_name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="data:image/png;base64,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" alt="Database ERD - Users Table"></p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token class-name">Key</span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">string</span> Username <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">string</span> DisplayName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="web-config-and-entity-framework"><a href="#web-config-and-entity-framework" aria-hidden="true" class="header-anchor">#</a> web.config and Entity Framework</h2> <p>The web.config of your website will have custom settings for Entity Framework. One of the important settings you should add has to do with turning off database initialization for your database context. The following example turns off database initialization for the <code>BloggingContext</code>. Note that in the element <code>&lt;context type=&quot;BlogDemo.BloggingContext, BlogDemo&quot; disableDatabaseInitialization=&quot;true&quot; /&gt;</code>, the type is a string with the fully-qualified class name followed by a command and then the name of the assembly.</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>contexts</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>BlogDemo.BloggingContext, BlogDemo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">disableDatabaseInitialization</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>contexts</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>This element should be placed inside the <code>&lt;entityFramework&gt;</code> element.</p> <p>Another customization you can do between your database context and the web.config is to specify a connection string for your database context. For example, if your web.config has a connection string named &quot;MyBlog&quot;, you would have your database context's constructor call the base class with a string that follows the pattern &quot;name=MyBlog&quot;.</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>add</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>MyBlog<span class="token punctuation">&quot;</span></span>
     <span class="token attr-name">connectionString</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Data Source=.;Initial Catalog=BloggingDB;Integrated Security=true;<span class="token punctuation">&quot;</span></span>
     <span class="token attr-name">providerName</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>System.Data.SqlClient<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BloggingContext</span> <span class="token punctuation">:</span> <span class="token class-name">DbContext</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">BloggingContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span><span class="token string">&quot;name=MyBlog&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> DbSet<span class="token operator">&lt;</span>Blog<span class="token operator">&gt;</span> Blogs <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> DbSet<span class="token operator">&lt;</span>Post<span class="token operator">&gt;</span> Posts <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> DbSet<span class="token operator">&lt;</span>User<span class="token operator">&gt;</span> Users <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token keyword">void</span> <span class="token function">OnModelCreating</span><span class="token punctuation">(</span><span class="token class-name">DbModelBuilder</span> modelBuilder<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        modelBuilder<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Entity</span><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">Property</span><span class="token punctuation">(</span>u <span class="token operator">=</span><span class="token operator">&gt;</span> u<span class="token punctuation">.</span>DisplayName<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">HasColumnName</span><span class="token punctuation">(</span><span class="token string">&quot;display_name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token class-name">Key</span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">string</span> Username <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">string</span> DisplayName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">10/9/2018, 2:24:27 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/topics/linq/lambda.html" class="prev">
          Lambdas and Delegates
        </a></span> <span class="next"><a href="/topics/ux/">
          Intro to UX
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/15.c996a126.js" defer></script><script src="/assets/js/app.83fe29d4.js" defer></script>
  </body>
</html>
