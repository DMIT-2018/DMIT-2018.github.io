<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>C# Expressions in LinqPad | DMIT-2018 Student Notes</title>
    <meta name="description" content="Intermediate Application Development">
    
    
    <link rel="preload" href="/assets/css/0.styles.912ec5d4.css" as="style"><link rel="preload" href="/assets/js/app.172045a0.js" as="script"><link rel="preload" href="/assets/js/43.6101a92a.js" as="script"><link rel="prefetch" href="/assets/js/1.b56394e5.js"><link rel="prefetch" href="/assets/js/2.c3435bbc.js"><link rel="prefetch" href="/assets/js/3.209ca72d.js"><link rel="prefetch" href="/assets/js/4.deea6cb2.js"><link rel="prefetch" href="/assets/js/5.8345a81c.js"><link rel="prefetch" href="/assets/js/6.a4e7b219.js"><link rel="prefetch" href="/assets/js/7.0350b644.js"><link rel="prefetch" href="/assets/js/8.4c3971ea.js"><link rel="prefetch" href="/assets/js/9.9ccf79ab.js"><link rel="prefetch" href="/assets/js/10.fb7400eb.js"><link rel="prefetch" href="/assets/js/11.74aa1f49.js"><link rel="prefetch" href="/assets/js/12.a6e69c7f.js"><link rel="prefetch" href="/assets/js/13.1b7c96b0.js"><link rel="prefetch" href="/assets/js/14.dc6d0ded.js"><link rel="prefetch" href="/assets/js/15.fe8c87ce.js"><link rel="prefetch" href="/assets/js/16.0d08e9a2.js"><link rel="prefetch" href="/assets/js/17.3322ef9e.js"><link rel="prefetch" href="/assets/js/18.eab33b19.js"><link rel="prefetch" href="/assets/js/19.b061bee5.js"><link rel="prefetch" href="/assets/js/20.c7296b4d.js"><link rel="prefetch" href="/assets/js/21.4971a30c.js"><link rel="prefetch" href="/assets/js/22.dbdb4ce8.js"><link rel="prefetch" href="/assets/js/23.4a58bea6.js"><link rel="prefetch" href="/assets/js/24.03581dc3.js"><link rel="prefetch" href="/assets/js/25.d9995c99.js"><link rel="prefetch" href="/assets/js/26.77446b56.js"><link rel="prefetch" href="/assets/js/27.107d3723.js"><link rel="prefetch" href="/assets/js/28.c2201dca.js"><link rel="prefetch" href="/assets/js/29.87731316.js"><link rel="prefetch" href="/assets/js/30.c30b13f5.js"><link rel="prefetch" href="/assets/js/31.826e5107.js"><link rel="prefetch" href="/assets/js/32.5f3b02ce.js"><link rel="prefetch" href="/assets/js/33.e62076a6.js"><link rel="prefetch" href="/assets/js/34.907158d6.js"><link rel="prefetch" href="/assets/js/35.c5117fdb.js"><link rel="prefetch" href="/assets/js/36.f4cc039c.js"><link rel="prefetch" href="/assets/js/37.9d559ac1.js"><link rel="prefetch" href="/assets/js/38.400619b3.js"><link rel="prefetch" href="/assets/js/39.f17a35b7.js"><link rel="prefetch" href="/assets/js/40.419c6fba.js"><link rel="prefetch" href="/assets/js/41.79e13fb5.js"><link rel="prefetch" href="/assets/js/42.a5804204.js"><link rel="prefetch" href="/assets/js/44.ccd4721e.js"><link rel="prefetch" href="/assets/js/45.905ee24d.js"><link rel="prefetch" href="/assets/js/46.b03bca20.js"><link rel="prefetch" href="/assets/js/47.1afbd03c.js"><link rel="prefetch" href="/assets/js/48.e4d89481.js"><link rel="prefetch" href="/assets/js/49.e3dd048f.js"><link rel="prefetch" href="/assets/js/50.3b852a4c.js"><link rel="prefetch" href="/assets/js/51.1b1704f0.js"><link rel="prefetch" href="/assets/js/52.16b09334.js"><link rel="prefetch" href="/assets/js/53.18c6924a.js"><link rel="prefetch" href="/assets/js/54.217cf1bb.js"><link rel="prefetch" href="/assets/js/55.6d6ce258.js"><link rel="prefetch" href="/assets/js/56.8e796bcb.js"><link rel="prefetch" href="/assets/js/57.3a390e41.js"><link rel="prefetch" href="/assets/js/58.6ba6a36e.js"><link rel="prefetch" href="/assets/js/59.6bca4b50.js"><link rel="prefetch" href="/assets/js/60.15cf5ae8.js"><link rel="prefetch" href="/assets/js/61.c308a652.js"><link rel="prefetch" href="/assets/js/62.629b4ccf.js"><link rel="prefetch" href="/assets/js/63.ce6e1535.js"><link rel="prefetch" href="/assets/js/64.10c40c0b.js"><link rel="prefetch" href="/assets/js/65.1b5c0bcb.js"><link rel="prefetch" href="/assets/js/66.6a5325c1.js"><link rel="prefetch" href="/assets/js/67.9f5f0296.js"><link rel="prefetch" href="/assets/js/68.1d3e578e.js"><link rel="prefetch" href="/assets/js/69.797f67ed.js">
    <link rel="stylesheet" href="/assets/css/0.styles.912ec5d4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DMIT-2018 Student Notes</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/topics/" class="nav-link">Notes</a></div><div class="nav-item"><a href="/demos/eRestaurant/" class="nav-link router-link-active">Demos</a></div><div class="nav-item"><a href="/about/slides-installing-sql-server.html" class="nav-link">MS SQL 2017</a></div><div class="nav-item"><a href="/exercises/" class="nav-link">Take Home</a></div><div class="nav-item"><a href="https://github.com/DMIT-2018/StudentNotes/issues/new" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Issues/Bugs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://moodle.nait.ca" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Moodle
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/topics/" class="nav-link">Notes</a></div><div class="nav-item"><a href="/demos/eRestaurant/" class="nav-link router-link-active">Demos</a></div><div class="nav-item"><a href="/about/slides-installing-sql-server.html" class="nav-link">MS SQL 2017</a></div><div class="nav-item"><a href="/exercises/" class="nav-link">Take Home</a></div><div class="nav-item"><a href="https://github.com/DMIT-2018/StudentNotes/issues/new" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Issues/Bugs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://moodle.nait.ca" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Moodle
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/demos/eRestaurant/" class="sidebar-link">eRestaurant Demo</a></li><li><a href="/demos/eRestaurant/about/" class="sidebar-link">eRestaurant Background Story</a></li><li><a href="/demos/eRestaurant/dvcs/demo.html" class="sidebar-link">DVCS Demo</a></li><li><a href="/demos/eRestaurant/sitemaps/demo2.html" class="sidebar-link">Adding a Web.sitemap</a></li><li><a href="/demos/eRestaurant/linq/" class="sidebar-link">LINQ - Query and Method Syntax</a></li><li><a href="/demos/eRestaurant/linq/extensions.html" class="sidebar-link">LINQ - More Method Syntax</a></li><li><a href="/demos/eRestaurant/linq/practice.html" class="sidebar-link">Practice Linq</a></li><li><a href="/demos/eRestaurant/entityFramework/demo/demo.html" class="sidebar-link">Entity Framework Demo</a></li><li><a href="/demos/eRestaurant/entityFramework/practice/practice.html" class="sidebar-link">eRestuarant Practice</a></li><li><a href="/demos/eRestaurant/entityFramework/practice/practice-solution.html" class="sidebar-link">eRestuarant Practice - Solution</a></li><li><a href="/demos/eRestaurant/aspNet/frontDesk/adminController.html" class="sidebar-link">Special Events - BLL</a></li><li><a href="/demos/eRestaurant/aspNet/frontDesk/adminSpecialEvents.html" class="sidebar-link">Special Events - PL</a></li><li><a href="/demos/eRestaurant/aspNet/frontDesk/menu.html" class="sidebar-link">Occupied Tables</a></li><li><a href="/demos/eRestaurant/reports/reportViewer/" class="sidebar-link">eRestaurant - Reporting Basics</a></li><li><a href="/demos/eRestaurant/reports/customizing/" class="sidebar-link">Customizing your Report</a></li><li><a href="/demos/eRestaurant/aspNet/userControls/messageUserControl.html" class="sidebar-link">MessageUserControl</a></li><li><a href="/demos/eRestaurant/testing/manual.html" class="sidebar-link">Faking a Point In Time</a></li><li><a href="/demos/eRestaurant/linq/frontDesk/reservations.html" class="sidebar-link">LinqPad - Querying Reservations</a></li><li><a href="/demos/eRestaurant/aspNet/frontDesk/reservations.html" class="sidebar-link">Displaying Reservations</a></li><li><a href="/demos/eRestaurant/linq/frontDesk/occupiedTables.html" class="sidebar-link">LinqPad - Querying Occupied Tables</a></li><li><a href="/demos/eRestaurant/aspNet/frontDesk/occupiedTables.html" class="sidebar-link">Occupied Tables</a></li><li><a href="/demos/eRestaurant/aspNet/frontDesk/bootstrapStyle.html" class="sidebar-link">Styling the Front Desk</a></li><li><a href="/demos/eRestaurant/businessRules/businessRuleException.html" class="sidebar-link">Business Rule Violations</a></li><li><a href="/demos/eRestaurant/businessRules/frontDesk/seatingWalkIns.html" class="sidebar-link">Seating Walk-Ins</a></li><li><a href="/demos/eRestaurant/businessRules/frontDesk/seatingReservations.html" class="sidebar-link">Seating Reservations</a></li><li><a href="/demos/eRestaurant/aspNet/userControls/fakeDateTime.html" class="sidebar-link">Fake DateTime</a></li><li><a href="/demos/eRestaurant/aspNet/frontDesk/queryString.html" class="sidebar-link">Serving Tables</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="c-expression"><a href="#c-expression" aria-hidden="true" class="header-anchor">#</a> C# Expression</h1> <p>LinqPad expression queries return the results from evaluating the LINQ query.</p> <h2 id="select-all"><a href="#select-all" aria-hidden="true" class="header-anchor">#</a> Select All</h2> <p>The simplest way to get all the rows of a table is to just reference the table. In this case, there is no LINQ being used at all.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code>Waiters
</code></pre></div><p><img src="/assets/img/Waiters.3d3686f0.png" alt="Waiters"></p> <p>The equivalent code using LINQ to get all the rows looks like this.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">from</span> person <span class="token keyword">in</span> <span class="token class-name">Waiters</span>
<span class="token keyword">select</span> person
</code></pre></div><p>If the above statement was written using method syntax, it would look like this.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code>Waiters
   <span class="token punctuation">.</span>Select <span class="token punctuation">(</span>person <span class="token operator">=</span><span class="token operator">&gt;</span> person<span class="token punctuation">)</span>
</code></pre></div><p><img src="/assets/img/Waiters.3d3686f0.png" alt="Waiters"></p> <hr> <h2 id="simple-where-clause"><a href="#simple-where-clause" aria-hidden="true" class="header-anchor">#</a> Simple Where Clause</h2> <p>Results from a select can be filtered by using a where clause, as in this example that checks the value in a given column.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">from</span> row <span class="token keyword">in</span> <span class="token class-name">Tables</span>
<span class="token keyword">where</span> row<span class="token punctuation">.</span>Capacity <span class="token operator">&gt;</span> <span class="token number">3</span>
<span class="token keyword">select</span> row
</code></pre></div><p>This is also a good time to check out the output window on LinqPad to compare the <em>Results</em>, <em>λ (method syntax)</em> and <em>SQL</em> for the LINQ expression entered.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// λ - Method syntax</span>
Tables
   <span class="token punctuation">.</span>Where <span class="token punctuation">(</span>row <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span>row<span class="token punctuation">.</span>Capacity <span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>Remember that in this sample, <code>row</code> is mearly a variable name; we could have named it anything we wanted. Also remember that the table called <code>Tables</code> holds data about physical tables in the restaurant.</p> <p><img src="/assets/img/Where-1.22638247.png" alt="Where Results 1"></p> <p>Observe that the header of the results identifies the data type of the collection: <code>IOrderedQueryable&lt;Table&gt;</code>. Depending on the code you write in the LinqPad editor, the results could be a generic kind that is evaluated by generating SQL (one of the <code>IQueryable</code> types) or producing an in-memory result (<code>IEnumerable</code>) or even a strongly-typed result (as in one of the examples on the bottom of the page). Also notice that in LinqPad, the Results window shows a column for the Bills and the Reservations. Clicking on those will bring up the bills &amp; reservations that have been recorded on that table.</p> <p>If you have experience in working with databases, you may be tempted to start &quot;thinking in SQL&quot;, particularly when you see keywords such as <code>from</code>, <code>where</code> and <code>select</code>. LINQ, however, is <strong>L</strong>anguage <strong>IN</strong>tegrated <strong>Q</strong>ueries, meaning that the code you are writing is actually part of the C# (or VB) syntax. Keep that in mind, particularly as you look at writing the conditional expression in your <code>where</code> clauses.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">from</span> booking <span class="token keyword">in</span> <span class="token class-name">Reservations</span>
<span class="token keyword">where</span> booking<span class="token punctuation">.</span>EventCode<span class="token punctuation">.</span><span class="token function">Equals</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">select</span> booking
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>Remember - LINQ is still C#, so expressing a boolean expression in the where clause is written as C# (<em>not SQL</em>).</p></div> <p>Notice that the method syntax makes uses of <strong>Lambda</strong> expressions. Lambdas are common when performing LINQ with the Method syntax.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code>Reservations
   <span class="token punctuation">.</span>Where <span class="token punctuation">(</span>booking <span class="token operator">=</span><span class="token operator">&gt;</span> booking<span class="token punctuation">.</span>EventCode<span class="token punctuation">.</span>Equals <span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>Note that in this example, we are using the <code>.Equals()</code> method of the string class, rather than the equal-to sign <code>==</code>. The reason for this is that the EventCode column can contain <code>NULL</code> values. Using the <code>.Equals()</code> avoids the problem of possible database <code>NULL</code> values causing a run-time error. Whenever a string column states it can hold <code>NULL</code> values, use the <code>.Equals()</code> when comparing values in your where clause.</p></div> <p><img src="/assets/img/Where-2.1ad94230.png" alt="Where Result 2"></p> <p>Just to drive home the point, see this example that uses the C# <code>!</code> operator. Also note that the column it is checking allows <code>NULL</code> values, and in C# this is being represented as a <strong>nullable data type</strong>.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">from</span> booking <span class="token keyword">in</span> <span class="token class-name">Reservations</span>
<span class="token keyword">where</span> <span class="token operator">!</span>booking<span class="token punctuation">.</span><span class="token class-name">EventCode<span class="token punctuation">.</span>HasValue</span>
<span class="token keyword">select</span> booking
</code></pre></div><p><img src="/assets/img/Where-3.323454ce.png" alt="Where Results 3"></p> <h3 id="try-this"><a href="#try-this" aria-hidden="true" class="header-anchor">#</a> Try this</h3> <ul><li>In the LinqPad example above, when you click on the Bills and Reservations, what does that tell you about the relationship between these and the Tables data?</li></ul> <hr> <h2 id="simple-orderby"><a href="#simple-orderby" aria-hidden="true" class="header-anchor">#</a> Simple OrderBy</h2> <p>By default, sorting is done in ascending order.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">from</span> food <span class="token keyword">in</span> <span class="token class-name">Items</span>
<span class="token keyword">orderby</span> food<span class="token punctuation">.</span><span class="token class-name">Description</span>
<span class="token keyword">select</span> food
</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// λ - Method Syntax</span>
Items
   <span class="token punctuation">.</span>OrderBy <span class="token punctuation">(</span>food <span class="token operator">=</span><span class="token operator">&gt;</span> food<span class="token punctuation">.</span>Description<span class="token punctuation">)</span>
</code></pre></div><p><img src="/assets/img/Orderby-1.600bcf8e.png" alt="Orderby example 1 as Method Syntax - Results"></p> <p>You can specify the descending and ascending order explicitly.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">from</span> food <span class="token keyword">in</span> <span class="token class-name">Items</span>
<span class="token keyword">orderby</span> food<span class="token punctuation">.</span><span class="token class-name">CurrentPrice</span> <span class="token keyword">descending</span>
<span class="token keyword">select</span> food
</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// λ - Method Syntax</span>
Items
   <span class="token punctuation">.</span>OrderByDescending <span class="token punctuation">(</span>food <span class="token operator">=</span><span class="token operator">&gt;</span> food<span class="token punctuation">.</span>CurrentPrice<span class="token punctuation">)</span>
</code></pre></div><p><img src="/assets/img/Orderby-2.cdaac2e4.png" alt="Orderby example 2 as Method Syntax - Results"></p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">from</span> food <span class="token keyword">in</span> <span class="token class-name">Items</span>
<span class="token keyword">orderby</span> food<span class="token punctuation">.</span><span class="token class-name">Calories</span> <span class="token keyword">ascending</span>
<span class="token keyword">select</span> food
</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// λ - Method Syntax</span>
Items
   <span class="token punctuation">.</span>OrderBy <span class="token punctuation">(</span>food <span class="token operator">=</span><span class="token operator">&gt;</span> food<span class="token punctuation">.</span>Calories<span class="token punctuation">)</span>
</code></pre></div><p><img src="/assets/img/Orderby-3.f22bd7c5.png" alt="Orderby example 3 as Method Syntax - Results"></p> <p>You can sort by multiple columns.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">from</span> food <span class="token keyword">in</span> <span class="token class-name">Items</span>
<span class="token keyword">orderby</span> food<span class="token punctuation">.</span><span class="token class-name">CurrentPrice</span> <span class="token keyword">descending</span><span class="token punctuation">,</span> food<span class="token punctuation">.</span><span class="token class-name">Calories</span> <span class="token keyword">ascending</span>
<span class="token keyword">select</span> food
</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// λ - Method Syntax</span>
Items
   <span class="token punctuation">.</span>OrderByDescending <span class="token punctuation">(</span>food <span class="token operator">=</span><span class="token operator">&gt;</span> food<span class="token punctuation">.</span>CurrentPrice<span class="token punctuation">)</span>
   <span class="token punctuation">.</span>ThenBy <span class="token punctuation">(</span>food <span class="token operator">=</span><span class="token operator">&gt;</span> food<span class="token punctuation">.</span>Calories<span class="token punctuation">)</span>
</code></pre></div><p><img src="/assets/img/Orderby-4.3d5100d9.png" alt="Orderby example 4 as Method Syntax - Results"></p> <hr> <h2 id="grouping"><a href="#grouping" aria-hidden="true" class="header-anchor">#</a> Grouping</h2> <p>Grouping can be used as a result in itself, without the <code>select</code> clause. Grouping produces a result that has two parts: a Key value, and the grouped items.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">from</span> food <span class="token keyword">in</span> <span class="token class-name">Items</span>
    <span class="token keyword">group</span> food by food<span class="token punctuation">.</span>MenuCategoryID
</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// λ - Method Syntax</span>
Items
   <span class="token punctuation">.</span>GroupBy <span class="token punctuation">(</span>food <span class="token operator">=</span><span class="token operator">&gt;</span> food<span class="token punctuation">.</span>MenuCategoryID<span class="token punctuation">)</span>
</code></pre></div><p><img src="/assets/img/Grouping-1.0bade2be.png" alt="Grouping example 1 as Method Syntax - Results"></p> <p>Like ordering, grouping can include more than one column. All you have to do is use an anonymous type for your grouping condition.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">from</span> food <span class="token keyword">in</span> <span class="token class-name">Items</span>
    <span class="token keyword">group</span> food by <span class="token keyword">new</span> <span class="token punctuation">{</span>food<span class="token punctuation">.</span>MenuCategoryID<span class="token punctuation">,</span> food<span class="token punctuation">.</span>CurrentPrice<span class="token punctuation">}</span>
</code></pre></div><p>Notice the use of <code>new {food.MenuCategoryID, food.CurrentPrice}</code>. This is an example of <strong>anonymous types</strong> (used in the grouping clause). You will read more about anonymous types in the result set of the select later on.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// λ - Method Syntax</span>
Items
   <span class="token punctuation">.</span>GroupBy <span class="token punctuation">(</span>
      food <span class="token operator">=</span><span class="token operator">&gt;</span>
        <span class="token keyword">new</span>  
        <span class="token punctuation">{</span>
          MenuCategoryID <span class="token operator">=</span> food<span class="token punctuation">.</span>MenuCategoryID<span class="token punctuation">,</span>
          CurrentPrice <span class="token operator">=</span> food<span class="token punctuation">.</span>CurrentPrice
        <span class="token punctuation">}</span>
   <span class="token punctuation">)</span>
</code></pre></div><p><img src="/assets/img/Grouping-2.853b5e18.png" alt="Grouping example 2 as Method Syntax - Results"></p> <p>A group can become something from which you can select your actual data. All you have to do is give a name to the resulting group.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">from</span> food <span class="token keyword">in</span> <span class="token class-name">Items</span>
<span class="token keyword">group</span> food by food<span class="token punctuation">.</span><span class="token class-name">MenuCategoryID</span> <span class="token keyword">into</span> result
<span class="token keyword">select</span> result
</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// λ - Method Syntax</span>
Items
   <span class="token punctuation">.</span>GroupBy <span class="token punctuation">(</span>food <span class="token operator">=</span><span class="token operator">&gt;</span> food<span class="token punctuation">.</span>MenuCategoryID<span class="token punctuation">)</span>
   <span class="token punctuation">.</span>Select <span class="token punctuation">(</span>result <span class="token operator">=</span><span class="token operator">&gt;</span> result<span class="token punctuation">)</span>
</code></pre></div><p><img src="/assets/img/Grouping-3.84518c08.png" alt="Grouping example 3 as Method Syntax - Results"></p> <hr> <h2 id="combining-clauses"><a href="#combining-clauses" aria-hidden="true" class="header-anchor">#</a> Combining Clauses</h2> <p>Combining clauses is simple, and the order of the <code>where</code> and <code>orderby</code> clauses (relative to each other) is not important. These two examples give the same result.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">from</span> food <span class="token keyword">in</span> <span class="token class-name">Items</span>
<span class="token keyword">where</span> food<span class="token punctuation">.</span>MenuCategory<span class="token punctuation">.</span>Description <span class="token operator">==</span> <span class="token string">&quot;Entree&quot;</span>
<span class="token keyword">orderby</span> food<span class="token punctuation">.</span><span class="token class-name">CurrentPrice</span> <span class="token keyword">descending</span>
<span class="token keyword">select</span> food
</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">from</span> food <span class="token keyword">in</span> <span class="token class-name">Items</span>
<span class="token keyword">orderby</span> food<span class="token punctuation">.</span><span class="token class-name">CurrentPrice</span> <span class="token keyword">descending</span>
<span class="token keyword">where</span> food<span class="token punctuation">.</span>MenuCategory<span class="token punctuation">.</span>Description <span class="token operator">==</span><span class="token string">&quot;Entree&quot;</span>
<span class="token keyword">select</span> food
</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// λ - Method Syntax</span>
Items
   <span class="token punctuation">.</span>Where <span class="token punctuation">(</span>food <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span>food<span class="token punctuation">.</span>MenuCategory<span class="token punctuation">.</span>Description <span class="token operator">==</span> <span class="token string">&quot;Entree&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span>OrderByDescending <span class="token punctuation">(</span>food <span class="token operator">=</span><span class="token operator">&gt;</span> food<span class="token punctuation">.</span>CurrentPrice<span class="token punctuation">)</span>
</code></pre></div><p><img src="/assets/img/Combined-1.bcb502b5.png" alt="Combined Clauses example 1 as Method Syntax - Results"></p> <p>This example gets the entrees and beverages, sorted by price and grouped by category.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">from</span> food <span class="token keyword">in</span> <span class="token class-name">Items</span>
<span class="token keyword">where</span> food<span class="token punctuation">.</span>MenuCategory<span class="token punctuation">.</span>Description <span class="token operator">==</span> <span class="token string">&quot;Entree&quot;</span> <span class="token operator">||</span> food<span class="token punctuation">.</span>MenuCategory<span class="token punctuation">.</span>Description <span class="token operator">==</span> <span class="token string">&quot;Beverage&quot;</span>
<span class="token keyword">orderby</span> food<span class="token punctuation">.</span><span class="token class-name">CurrentPrice</span> <span class="token keyword">descending</span>
<span class="token keyword">group</span> food by food<span class="token punctuation">.</span><span class="token class-name">MenuCategoryID</span> <span class="token keyword">into</span> result
<span class="token keyword">select</span> result
</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// λ - Method Syntax</span>
Items
   <span class="token punctuation">.</span>Where <span class="token punctuation">(</span>
      food <span class="token operator">=</span><span class="token operator">&gt;</span> 
            <span class="token punctuation">(</span><span class="token punctuation">(</span>food<span class="token punctuation">.</span>MenuCategory<span class="token punctuation">.</span>Description <span class="token operator">==</span> <span class="token string">&quot;Entree&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> 
               <span class="token punctuation">(</span>food<span class="token punctuation">.</span>MenuCategory<span class="token punctuation">.</span>Description <span class="token operator">==</span> <span class="token string">&quot;Beverage&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
   <span class="token punctuation">)</span>
   <span class="token punctuation">.</span>OrderByDescending <span class="token punctuation">(</span>food <span class="token operator">=</span><span class="token operator">&gt;</span> food<span class="token punctuation">.</span>CurrentPrice<span class="token punctuation">)</span>
   <span class="token punctuation">.</span>GroupBy <span class="token punctuation">(</span>food <span class="token operator">=</span><span class="token operator">&gt;</span> food<span class="token punctuation">.</span>MenuCategoryID<span class="token punctuation">)</span>
   <span class="token punctuation">.</span>Select <span class="token punctuation">(</span>result <span class="token operator">=</span><span class="token operator">&gt;</span> result<span class="token punctuation">)</span>
</code></pre></div><p><img src="/assets/img/Combined-2.a612c417.png" alt="Combined Clauses example 2 as Method Syntax - Results"></p> <hr> <h2 id="anonymous-types"><a href="#anonymous-types" aria-hidden="true" class="header-anchor">#</a> Anonymous Types</h2> <p>All of the examples so far demonstrated selecting the complete set of results or entire table sets. Because C# supports the concept of Anonymous Types – a feature of C# that stands apart from LINQ itself – we can select only the data we want to see, as in these exampes.</p> <p>To identify what data you want in your select, simply name properties in the initializer list and assign the values from your query's result set.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">from</span> food <span class="token keyword">in</span> <span class="token class-name">Items</span>
<span class="token keyword">where</span> food<span class="token punctuation">.</span>MenuCategory<span class="token punctuation">.</span>Description <span class="token operator">==</span> <span class="token string">&quot;Entree&quot;</span> <span class="token operator">&amp;&amp;</span> food<span class="token punctuation">.</span><span class="token class-name">Active</span>
<span class="token keyword">orderby</span> food<span class="token punctuation">.</span><span class="token class-name">CurrentPrice</span> <span class="token keyword">descending</span>
<span class="token keyword">select</span> <span class="token keyword">new</span>
<span class="token punctuation">{</span>
    Description <span class="token operator">=</span> food<span class="token punctuation">.</span>Description<span class="token punctuation">,</span>
    Price <span class="token operator">=</span> food<span class="token punctuation">.</span>CurrentPrice<span class="token punctuation">,</span>
    Calories <span class="token operator">=</span> food<span class="token punctuation">.</span>Calories
<span class="token punctuation">}</span>
</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// λ - Method Syntax</span>
Items
   <span class="token punctuation">.</span>Where <span class="token punctuation">(</span>food <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>food<span class="token punctuation">.</span>MenuCategory<span class="token punctuation">.</span>Description <span class="token operator">==</span> <span class="token string">&quot;Entree&quot;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> food<span class="token punctuation">.</span>Active<span class="token punctuation">)</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span>OrderByDescending <span class="token punctuation">(</span>food <span class="token operator">=</span><span class="token operator">&gt;</span> food<span class="token punctuation">.</span>CurrentPrice<span class="token punctuation">)</span>
   <span class="token punctuation">.</span>Select <span class="token punctuation">(</span>
      food <span class="token operator">=</span><span class="token operator">&gt;</span>
         <span class="token keyword">new</span>  
         <span class="token punctuation">{</span>
            Description <span class="token operator">=</span> food<span class="token punctuation">.</span>Description<span class="token punctuation">,</span>
            Price <span class="token operator">=</span> food<span class="token punctuation">.</span>CurrentPrice<span class="token punctuation">,</span>
            Calories <span class="token operator">=</span> food<span class="token punctuation">.</span>Calories
         <span class="token punctuation">}</span>
   <span class="token punctuation">)</span>
</code></pre></div><p><img src="/assets/img/Anon-2.d8ba20cd.png" alt="Anonymous type example 1 as Method Syntax - Results"></p> <p>Part of the power of selecting into another type (anonymous or otherwise) is the ability to perform calculations</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">from</span> person <span class="token keyword">in</span> <span class="token class-name">Waiters</span>
    <span class="token keyword">where</span> person<span class="token punctuation">.</span>ReleaseDate <span class="token operator">==</span> <span class="token keyword">null</span>
    <span class="token keyword">select</span> <span class="token keyword">new</span>
    <span class="token punctuation">{</span>
        Name <span class="token operator">=</span> person<span class="token punctuation">.</span>FirstName <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> person<span class="token punctuation">.</span>LastName<span class="token punctuation">,</span>
        Phone <span class="token operator">=</span> person<span class="token punctuation">.</span>Phone<span class="token punctuation">,</span>
        DaysEmployed <span class="token operator">=</span> <span class="token punctuation">(</span>DateTime<span class="token punctuation">.</span>Today <span class="token operator">-</span> person<span class="token punctuation">.</span>HireDate<span class="token punctuation">)</span><span class="token punctuation">.</span>Days
    <span class="token punctuation">}</span>
</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// λ - Method Syntax</span>
Waiters
   <span class="token punctuation">.</span>Where <span class="token punctuation">(</span>person <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span>person<span class="token punctuation">.</span>ReleaseDate <span class="token operator">==</span> <span class="token punctuation">(</span>DateTime<span class="token operator">?</span><span class="token punctuation">)</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span>Select <span class="token punctuation">(</span>
      person <span class="token operator">=</span><span class="token operator">&gt;</span> 
         <span class="token keyword">new</span>  
         <span class="token punctuation">{</span>
            Name <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>FirstName <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> person<span class="token punctuation">.</span>LastName<span class="token punctuation">)</span><span class="token punctuation">,</span> 
            Phone <span class="token operator">=</span> person<span class="token punctuation">.</span>Phone<span class="token punctuation">,</span> 
            DaysEmployed <span class="token operator">=</span> <span class="token punctuation">(</span>DateTime<span class="token punctuation">.</span>Today <span class="token operator">-</span> person<span class="token punctuation">.</span>HireDate<span class="token punctuation">)</span><span class="token punctuation">.</span>Days
         <span class="token punctuation">}</span>
   <span class="token punctuation">)</span>
</code></pre></div><p><img src="/assets/img/Anon-1.95794504.png" alt="Anonymous type example 2 as Method Syntax - Results"></p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">from</span> food <span class="token keyword">in</span> <span class="token class-name">Items</span>
<span class="token keyword">where</span> food<span class="token punctuation">.</span>MenuCategory<span class="token punctuation">.</span>Description <span class="token operator">==</span> <span class="token string">&quot;Entree&quot;</span> <span class="token operator">||</span> food<span class="token punctuation">.</span>MenuCategory<span class="token punctuation">.</span>Description <span class="token operator">==</span> <span class="token string">&quot;Beverage&quot;</span>
<span class="token keyword">orderby</span> food<span class="token punctuation">.</span><span class="token class-name">CurrentPrice</span> <span class="token keyword">descending</span>
<span class="token keyword">group</span> food by food<span class="token punctuation">.</span><span class="token class-name">MenuCategory</span> <span class="token keyword">into</span> foodGroup
<span class="token keyword">select</span> <span class="token keyword">new</span>
<span class="token punctuation">{</span>
    Category <span class="token operator">=</span> foodGroup<span class="token punctuation">.</span>Key<span class="token punctuation">.</span>Description<span class="token punctuation">,</span>
    MenuItems <span class="token operator">=</span> foodGroup<span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// λ - Method Syntax</span>
Items
   <span class="token punctuation">.</span>Where <span class="token punctuation">(</span>
      food <span class="token operator">=</span><span class="token operator">&gt;</span> 
            <span class="token punctuation">(</span><span class="token punctuation">(</span>food<span class="token punctuation">.</span>MenuCategory<span class="token punctuation">.</span>Description <span class="token operator">==</span> <span class="token string">&quot;Entree&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> 
               <span class="token punctuation">(</span>food<span class="token punctuation">.</span>MenuCategory<span class="token punctuation">.</span>Description <span class="token operator">==</span> <span class="token string">&quot;Beverage&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
   <span class="token punctuation">)</span>
   <span class="token punctuation">.</span>OrderByDescending <span class="token punctuation">(</span>food <span class="token operator">=</span><span class="token operator">&gt;</span> food<span class="token punctuation">.</span>CurrentPrice<span class="token punctuation">)</span>
   <span class="token punctuation">.</span>GroupBy <span class="token punctuation">(</span>food <span class="token operator">=</span><span class="token operator">&gt;</span> food<span class="token punctuation">.</span>MenuCategory<span class="token punctuation">)</span>
   <span class="token punctuation">.</span>Select <span class="token punctuation">(</span>
      foodGroup <span class="token operator">=</span><span class="token operator">&gt;</span> 
         <span class="token keyword">new</span>  
         <span class="token punctuation">{</span>
            Category <span class="token operator">=</span> foodGroup<span class="token punctuation">.</span>Key<span class="token punctuation">.</span>Description<span class="token punctuation">,</span> 
            MenuItems <span class="token operator">=</span> foodGroup<span class="token punctuation">.</span>ToList <span class="token punctuation">(</span><span class="token punctuation">)</span>
         <span class="token punctuation">}</span>
   <span class="token punctuation">)</span>
</code></pre></div><p><img src="/assets/img/Anon-3.7f9b57ea.png" alt="Anonymous type example 3 as Method Syntax - Results"></p> <hr> <h2 id="nested-queries"><a href="#nested-queries" aria-hidden="true" class="header-anchor">#</a> Nested Queries</h2> <p>LINQ queries can be nested as well. When used together with navigation properties, it's possible to get very expressive results with straight-forward and readable queries.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">from</span> cat <span class="token keyword">in</span> <span class="token class-name">MenuCategories</span>
<span class="token keyword">where</span> cat<span class="token punctuation">.</span>Description <span class="token operator">==</span> <span class="token string">&quot;Appetizer&quot;</span> <span class="token operator">||</span> cat<span class="token punctuation">.</span>Description <span class="token operator">==</span> <span class="token string">&quot;Entree&quot;</span>
<span class="token keyword">orderby</span> cat<span class="token punctuation">.</span><span class="token class-name">Description</span>
<span class="token keyword">select</span> <span class="token keyword">new</span>
<span class="token punctuation">{</span>
  Description <span class="token operator">=</span> cat<span class="token punctuation">.</span>Description<span class="token punctuation">,</span>
  MenuItems <span class="token operator">=</span> <span class="token keyword">from</span> item <span class="token keyword">in</span> cat<span class="token punctuation">.</span><span class="token class-name">Items</span>
              <span class="token keyword">where</span> item<span class="token punctuation">.</span><span class="token class-name">Active</span>
              <span class="token keyword">orderby</span> item<span class="token punctuation">.</span><span class="token class-name">Description</span>
              <span class="token keyword">select</span> <span class="token keyword">new</span>
              <span class="token punctuation">{</span>
                Description <span class="token operator">=</span> item<span class="token punctuation">.</span>Description<span class="token punctuation">,</span>
                Price <span class="token operator">=</span> item<span class="token punctuation">.</span>CurrentPrice<span class="token punctuation">,</span>
                Calories <span class="token operator">=</span> item<span class="token punctuation">.</span>Calories<span class="token punctuation">,</span>
                Comment <span class="token operator">=</span> item<span class="token punctuation">.</span>Comment
              <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// λ - Method Syntax</span>
MenuCategories
   <span class="token punctuation">.</span>Where <span class="token punctuation">(</span>cat <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>cat<span class="token punctuation">.</span>Description <span class="token operator">==</span> <span class="token string">&quot;Appetizer&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>cat<span class="token punctuation">.</span>Description <span class="token operator">==</span> <span class="token string">&quot;Entree&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span>OrderBy <span class="token punctuation">(</span>cat <span class="token operator">=</span><span class="token operator">&gt;</span> cat<span class="token punctuation">.</span>Description<span class="token punctuation">)</span>
   <span class="token punctuation">.</span>Select <span class="token punctuation">(</span>
      cat <span class="token operator">=</span><span class="token operator">&gt;</span> 
         <span class="token keyword">new</span>  
         <span class="token punctuation">{</span>
            Description <span class="token operator">=</span> cat<span class="token punctuation">.</span>Description<span class="token punctuation">,</span> 
            MenuItems <span class="token operator">=</span> cat<span class="token punctuation">.</span>Items<span class="token punctuation">.</span>Where <span class="token punctuation">(</span>item <span class="token operator">=</span><span class="token operator">&gt;</span> item<span class="token punctuation">.</span>Active<span class="token punctuation">)</span><span class="token punctuation">.</span>OrderBy <span class="token punctuation">(</span>item <span class="token operator">=</span><span class="token operator">&gt;</span> item<span class="token punctuation">.</span>Description<span class="token punctuation">)</span>
               <span class="token punctuation">.</span>Select <span class="token punctuation">(</span>
                  item <span class="token operator">=</span><span class="token operator">&gt;</span> 
                     <span class="token keyword">new</span>  
                     <span class="token punctuation">{</span>
                        Description <span class="token operator">=</span> item<span class="token punctuation">.</span>Description<span class="token punctuation">,</span> 
                        Price <span class="token operator">=</span> item<span class="token punctuation">.</span>CurrentPrice<span class="token punctuation">,</span> 
                        Calories <span class="token operator">=</span> item<span class="token punctuation">.</span>Calories<span class="token punctuation">,</span> 
                        Comment <span class="token operator">=</span> item<span class="token punctuation">.</span>Comment
                     <span class="token punctuation">}</span>
               <span class="token punctuation">)</span>
         <span class="token punctuation">}</span>
   <span class="token punctuation">)</span>
</code></pre></div><p><img src="/assets/img/Nested-1.610b06e4.png" alt="Nested example 1 as Method Syntax - Results"></p></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">7/4/2018, 4:01:50 PM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/43.6101a92a.js" defer></script><script src="/assets/js/app.172045a0.js" defer></script>
  </body>
</html>
