<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>LinqPad - Querying Occupied Tables | DMIT-2018 Student Notes</title>
    <meta name="description" content="Intermediate Application Development">
    
    
    <link rel="preload" href="/assets/css/0.styles.912ec5d4.css" as="style"><link rel="preload" href="/assets/js/app.b0ba34e2.js" as="script"><link rel="preload" href="/assets/js/47.7b4ca8bb.js" as="script"><link rel="prefetch" href="/assets/js/1.8ffc51bc.js"><link rel="prefetch" href="/assets/js/2.30603753.js"><link rel="prefetch" href="/assets/js/3.51b375eb.js"><link rel="prefetch" href="/assets/js/4.6cd92785.js"><link rel="prefetch" href="/assets/js/5.ac96cda7.js"><link rel="prefetch" href="/assets/js/6.96b5bae3.js"><link rel="prefetch" href="/assets/js/7.a4264ea1.js"><link rel="prefetch" href="/assets/js/8.854ff50d.js"><link rel="prefetch" href="/assets/js/9.1a7a7e14.js"><link rel="prefetch" href="/assets/js/10.07c976ec.js"><link rel="prefetch" href="/assets/js/11.2fd6b4e5.js"><link rel="prefetch" href="/assets/js/12.ccef5814.js"><link rel="prefetch" href="/assets/js/13.dbfaa7cb.js"><link rel="prefetch" href="/assets/js/14.901e0818.js"><link rel="prefetch" href="/assets/js/15.8c0bb115.js"><link rel="prefetch" href="/assets/js/16.76946ee5.js"><link rel="prefetch" href="/assets/js/17.27a0caab.js"><link rel="prefetch" href="/assets/js/18.fd7b7665.js"><link rel="prefetch" href="/assets/js/19.eb7c9817.js"><link rel="prefetch" href="/assets/js/20.a0787dcb.js"><link rel="prefetch" href="/assets/js/21.64e5b701.js"><link rel="prefetch" href="/assets/js/22.f5a7fdc7.js"><link rel="prefetch" href="/assets/js/23.24254cab.js"><link rel="prefetch" href="/assets/js/24.316b8ca2.js"><link rel="prefetch" href="/assets/js/25.9d507278.js"><link rel="prefetch" href="/assets/js/26.fea85597.js"><link rel="prefetch" href="/assets/js/27.31a8df08.js"><link rel="prefetch" href="/assets/js/28.dda7c4e8.js"><link rel="prefetch" href="/assets/js/29.654102c8.js"><link rel="prefetch" href="/assets/js/30.d9d9dd08.js"><link rel="prefetch" href="/assets/js/31.00db0482.js"><link rel="prefetch" href="/assets/js/32.5bb4217d.js"><link rel="prefetch" href="/assets/js/33.1d1ddcc5.js"><link rel="prefetch" href="/assets/js/34.bca6b65e.js"><link rel="prefetch" href="/assets/js/35.8f90e265.js"><link rel="prefetch" href="/assets/js/36.d549f52e.js"><link rel="prefetch" href="/assets/js/37.9471fed7.js"><link rel="prefetch" href="/assets/js/38.e8850f39.js"><link rel="prefetch" href="/assets/js/39.c1e9d06c.js"><link rel="prefetch" href="/assets/js/40.37f91ab7.js"><link rel="prefetch" href="/assets/js/41.809b062c.js"><link rel="prefetch" href="/assets/js/42.702f727b.js"><link rel="prefetch" href="/assets/js/43.b497e416.js"><link rel="prefetch" href="/assets/js/44.b7cf177c.js"><link rel="prefetch" href="/assets/js/45.673d6b86.js"><link rel="prefetch" href="/assets/js/46.043fe31c.js"><link rel="prefetch" href="/assets/js/48.cac9d7b8.js"><link rel="prefetch" href="/assets/js/49.96946ec8.js"><link rel="prefetch" href="/assets/js/50.83a97480.js"><link rel="prefetch" href="/assets/js/51.99993db7.js"><link rel="prefetch" href="/assets/js/52.a2ec74bc.js"><link rel="prefetch" href="/assets/js/53.9be5d71c.js"><link rel="prefetch" href="/assets/js/54.65a836e6.js"><link rel="prefetch" href="/assets/js/55.9f566682.js"><link rel="prefetch" href="/assets/js/56.b4f6a909.js"><link rel="prefetch" href="/assets/js/57.54cb064b.js"><link rel="prefetch" href="/assets/js/58.91d074d4.js"><link rel="prefetch" href="/assets/js/59.085d0481.js"><link rel="prefetch" href="/assets/js/60.f2e80823.js"><link rel="prefetch" href="/assets/js/61.e378a6d7.js"><link rel="prefetch" href="/assets/js/62.d7107dd0.js"><link rel="prefetch" href="/assets/js/63.9926bd60.js"><link rel="prefetch" href="/assets/js/64.98d2d7bd.js"><link rel="prefetch" href="/assets/js/65.ef784bdb.js"><link rel="prefetch" href="/assets/js/66.4f743356.js"><link rel="prefetch" href="/assets/js/67.51e5dc92.js"><link rel="prefetch" href="/assets/js/68.7f01549a.js"><link rel="prefetch" href="/assets/js/69.9e8b7757.js"><link rel="prefetch" href="/assets/js/70.87e6c82a.js"><link rel="prefetch" href="/assets/js/71.636dda82.js"><link rel="prefetch" href="/assets/js/72.af5d344c.js"><link rel="prefetch" href="/assets/js/73.6dc71b14.js"><link rel="prefetch" href="/assets/js/74.2e78e913.js"><link rel="prefetch" href="/assets/js/75.35b5f930.js"><link rel="prefetch" href="/assets/js/76.ba02670e.js"><link rel="prefetch" href="/assets/js/77.e2aeafa6.js"><link rel="prefetch" href="/assets/js/78.a7856c59.js"><link rel="prefetch" href="/assets/js/79.f4ed24d5.js"><link rel="prefetch" href="/assets/js/80.78b6c717.js"><link rel="prefetch" href="/assets/js/81.3d6a22d6.js"><link rel="prefetch" href="/assets/js/82.2cd90fe2.js"><link rel="prefetch" href="/assets/js/83.2dc059ff.js"><link rel="prefetch" href="/assets/js/84.e60c309b.js"><link rel="prefetch" href="/assets/js/85.9b470a1b.js"><link rel="prefetch" href="/assets/js/86.de64bcd0.js"><link rel="prefetch" href="/assets/js/87.efbb7c03.js"><link rel="prefetch" href="/assets/js/88.904b15e6.js"><link rel="prefetch" href="/assets/js/89.641c2f05.js">
    <link rel="stylesheet" href="/assets/css/0.styles.912ec5d4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DMIT-2018 Student Notes</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/topics/" class="nav-link">Notes</a></div><div class="nav-item"><a href="/demos/" class="nav-link router-link-active">Demos</a></div><div class="nav-item"><a href="https://dmit-2018.github.io/about/slides-installing-sql-server.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MS SQL 2017
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/DMIT-2018/StudentNotes/issues/new" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Issues/Bugs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://moodle.nait.ca" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Moodle
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/topics/" class="nav-link">Notes</a></div><div class="nav-item"><a href="/demos/" class="nav-link router-link-active">Demos</a></div><div class="nav-item"><a href="https://dmit-2018.github.io/about/slides-installing-sql-server.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MS SQL 2017
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/DMIT-2018/StudentNotes/issues/new" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Issues/Bugs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://moodle.nait.ca" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Moodle
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/demos/eRestaurant/" class="sidebar-link">eRestaurant Demo</a></li><li><a href="/demos/eRestaurant/about/" class="sidebar-link">eRestaurant Background Story</a></li><li><a href="/demos/eRestaurant/dvcs/demo.html" class="sidebar-link">DVCS Demo</a></li><li><a href="/demos/eRestaurant/sitemaps/demo2.html" class="sidebar-link">Adding a Web.sitemap</a></li><li><a href="/demos/eRestaurant/linq/" class="sidebar-link">LINQ - Query and Method Syntax</a></li><li><a href="/demos/eRestaurant/linq/extensions.html" class="sidebar-link">LINQ - More Method Syntax</a></li><li><a href="/demos/eRestaurant/linq/practice.html" class="sidebar-link">Practice Linq</a></li><li><a href="/demos/eRestaurant/entityFramework/demo/demo.html" class="sidebar-link">Entity Framework Demo</a></li><li><a href="/demos/eRestaurant/entityFramework/practice/practice.html" class="sidebar-link">eRestuarant Practice</a></li><li><a href="/demos/eRestaurant/entityFramework/practice/practice-solution.html" class="sidebar-link">eRestuarant Practice - Solution</a></li><li><a href="/demos/eRestaurant/aspNet/frontDesk/adminController.html" class="sidebar-link">Special Events - BLL</a></li><li><a href="/demos/eRestaurant/aspNet/frontDesk/adminSpecialEvents.html" class="sidebar-link">Special Events - PL</a></li><li><a href="/demos/eRestaurant/aspNet/frontDesk/menu.html" class="sidebar-link">Occupied Tables</a></li><li><a href="/demos/eRestaurant/reports/reportViewer/" class="sidebar-link">eRestaurant - Reporting Basics</a></li><li><a href="/demos/eRestaurant/reports/customizing/" class="sidebar-link">Customizing your Report</a></li><li><a href="/demos/eRestaurant/aspNet/userControls/messageUserControl.html" class="sidebar-link">MessageUserControl</a></li><li><a href="/demos/eRestaurant/testing/manual.html" class="sidebar-link">Faking a Point In Time</a></li><li><a href="/demos/eRestaurant/linq/frontDesk/reservations.html" class="sidebar-link">LinqPad - Querying Reservations</a></li><li><a href="/demos/eRestaurant/aspNet/frontDesk/reservations.html" class="sidebar-link">Displaying Reservations</a></li><li><a href="/demos/eRestaurant/linq/frontDesk/occupiedTables.html" class="active sidebar-link">LinqPad - Querying Occupied Tables</a></li><li><a href="/demos/eRestaurant/aspNet/frontDesk/occupiedTables.html" class="sidebar-link">Occupied Tables</a></li><li><a href="/demos/eRestaurant/aspNet/frontDesk/bootstrapStyle.html" class="sidebar-link">Styling the Front Desk</a></li><li><a href="/demos/eRestaurant/businessRules/businessRuleException.html" class="sidebar-link">Business Rule Violations</a></li><li><a href="/demos/eRestaurant/businessRules/frontDesk/seatingWalkIns.html" class="sidebar-link">Seating Walk-Ins</a></li><li><a href="/demos/eRestaurant/businessRules/frontDesk/seatingReservations.html" class="sidebar-link">Seating Reservations</a></li><li><a href="/demos/eRestaurant/aspNet/userControls/fakeDateTime.html" class="sidebar-link">Fake DateTime</a></li><li><a href="/demos/eRestaurant/aspNet/frontDesk/queryString.html" class="sidebar-link">Serving Tables</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="linqpad-querying-occupied-tables"><a href="#linqpad-querying-occupied-tables" aria-hidden="true" class="header-anchor">#</a> LinqPad - Querying Occupied Tables</h1> <p>In this sample, we build a <strong>multi-step query</strong> to get the table information for the Front Desk (with billing for walk-ins and reservations).</p> <p>Can't use DateTime.Date in Linq to Entities - check out <a href="http://msdn.microsoft.com/en-us/library/bb738563%28VS.100%29.aspx" target="_blank" rel="noopener noreferrer">Date and Time Canonical Functions<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="http://msdn.microsoft.com/en-us/library/dd456873.aspx" target="_blank" rel="noopener noreferrer">How to: Call Canonical Functions<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and ...</p> <ul><li>LinqPad Prep - C# Statements - Create variables for date &amp; time LinqPad Code</li></ul> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// Find out information on the tables in the restaurant at a specific date/time</span>
<span class="token comment">// Create a date and time object to use for sample input data</span>
<span class="token keyword">var</span> date <span class="token operator">=</span> Bills<span class="token punctuation">.</span><span class="token function">Max</span><span class="token punctuation">(</span>b <span class="token operator">=</span><span class="token operator">&gt;</span> b<span class="token punctuation">.</span>BillDate<span class="token punctuation">)</span><span class="token punctuation">.</span>Date<span class="token punctuation">;</span>
<span class="token keyword">var</span> time <span class="token operator">=</span> Bills<span class="token punctuation">.</span><span class="token function">Max</span><span class="token punctuation">(</span>b <span class="token operator">=</span><span class="token operator">&gt;</span> b<span class="token punctuation">.</span>BillDate<span class="token punctuation">)</span><span class="token punctuation">.</span>TimeOfDay<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TimeSpan</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
date<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Dump</span><span class="token punctuation">(</span><span class="token string">&quot;The test date/time I am using&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><ul><li>LinqPad - Step 1 - Get the table info along with any walk-in bills and reservation bills for the specific time slot LinqPad Code
<ul><li>Table occupancy for a given point of time can be determined by examining the Bill's BillDate and OrderPaid information: If the point of time we are using falls within the date/time that the customers were seated (BillDate) and when they finished their meal (OrderPaid), then they are occupying a table at the time. Thus, we can examine these values in the Bills table for each table in the restaurant.</li> <li>It's important to note that any given Bill can be attributed either directly to a single table or to a reservation. That is because there are two kinds of customers: Walk-Ins and Reservations. This has an implication in finding the occupancy of the restaurant. There are two ways to get from Tables to the Bills: directly from Tables to Bills, or indirectly through the ReservationTables and Reservations.</li></ul></li></ul> <p><img src="data:image/png;base64,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" alt="Tables for Walk-In Billing"></p> <p><img src="data:image/png;base64,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" alt="Tables for Reservation Billing"></p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// Step 1 - Get the table info along with any walk-in bills and reservation bills for the specific time slot</span>
<span class="token keyword">var</span> step1 <span class="token operator">=</span> <span class="token keyword">from</span> data <span class="token keyword">in</span> <span class="token class-name">Tables</span>
                <span class="token keyword">select</span> <span class="token keyword">new</span>
                <span class="token punctuation">{</span>
                Table <span class="token operator">=</span> data<span class="token punctuation">.</span>TableNumber<span class="token punctuation">,</span>
                Seating <span class="token operator">=</span> data<span class="token punctuation">.</span>Capacity<span class="token punctuation">,</span>
                <span class="token comment">// This sub-query gets the bills for walk-in customers</span>
                WalkIns <span class="token operator">=</span> <span class="token keyword">from</span> walkIn <span class="token keyword">in</span> data<span class="token punctuation">.</span><span class="token class-name">Bills</span>
                        <span class="token keyword">where</span> 
                                walkIn<span class="token punctuation">.</span>BillDate<span class="token punctuation">.</span>Year <span class="token operator">==</span> date<span class="token punctuation">.</span>Year
                            <span class="token operator">&amp;&amp;</span> walkIn<span class="token punctuation">.</span>BillDate<span class="token punctuation">.</span>Month <span class="token operator">==</span> date<span class="token punctuation">.</span>Month
                            <span class="token operator">&amp;&amp;</span> walkIn<span class="token punctuation">.</span>BillDate<span class="token punctuation">.</span>Day <span class="token operator">==</span> date<span class="token punctuation">.</span>Day
                            <span class="token operator">&amp;&amp;</span> walkIn<span class="token punctuation">.</span>BillDate<span class="token punctuation">.</span>TimeOfDay <span class="token operator">&lt;=</span> time
                            <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token operator">!</span>walkIn<span class="token punctuation">.</span>OrderPaid<span class="token punctuation">.</span>HasValue <span class="token operator">||</span> walkIn<span class="token punctuation">.</span>OrderPaid<span class="token punctuation">.</span>Value <span class="token operator">&gt;=</span> time<span class="token punctuation">)</span>
<span class="token comment">//                          &amp;&amp; (!walkIn.PaidStatus || walkIn.OrderPaid &gt;= time)</span>
                        <span class="token keyword">select</span> walkIn<span class="token punctuation">,</span>
                    <span class="token comment">// This sub-query gets the bills for reservations</span>
                    Reservations <span class="token operator">=</span> <span class="token keyword">from</span> booking <span class="token keyword">in</span> data<span class="token punctuation">.</span><span class="token class-name">ReservationTables</span>
                        <span class="token keyword">from</span> reservationParty <span class="token keyword">in</span> booking<span class="token punctuation">.</span><span class="token class-name">Reservation<span class="token punctuation">.</span>Bills</span>
                        <span class="token keyword">where</span> 
                                reservationParty<span class="token punctuation">.</span>BillDate<span class="token punctuation">.</span>Year <span class="token operator">==</span> date<span class="token punctuation">.</span>Year
                            <span class="token operator">&amp;&amp;</span> reservationParty<span class="token punctuation">.</span>BillDate<span class="token punctuation">.</span>Month <span class="token operator">==</span> date<span class="token punctuation">.</span>Month
                            <span class="token operator">&amp;&amp;</span> reservationParty<span class="token punctuation">.</span>BillDate<span class="token punctuation">.</span>Day <span class="token operator">==</span> date<span class="token punctuation">.</span>Day
                            <span class="token operator">&amp;&amp;</span> reservationParty<span class="token punctuation">.</span>BillDate<span class="token punctuation">.</span>TimeOfDay <span class="token operator">&lt;=</span> time
                            <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token operator">!</span>reservationParty<span class="token punctuation">.</span>OrderPaid<span class="token punctuation">.</span>HasValue <span class="token operator">||</span> reservationParty<span class="token punctuation">.</span>OrderPaid<span class="token punctuation">.</span>Value <span class="token operator">&gt;=</span> time<span class="token punctuation">)</span>
<span class="token comment">//                          &amp;&amp; (!reservationParty.PaidStatus || reservationParty.OrderPaid &gt;= time)</span>
                        <span class="token keyword">select</span> reservationParty
                <span class="token punctuation">}</span><span class="token punctuation">;</span>
step1<span class="token punctuation">.</span><span class="token function">Dump</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>LinqPad - Step 2 - Union the walk-in bills and the reservation bills while extracting the relevant bill info
<ul><li>Do this first without the <code>.ToList()</code> to show the error &quot;Types in Union or Concat are constructed incompatibly&quot;.</li></ul></li></ul> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// Step 2 - Union the walk-in bills and the reservation bills while extracting the relevant bill info</span>
<span class="token comment">// .ToList() helps resolve the &quot;Types in Union or Concat are constructed incompatibly&quot; error</span>
<span class="token keyword">var</span> step2 <span class="token operator">=</span> <span class="token keyword">from</span> data <span class="token keyword">in</span> step1<span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// .ToList() forces the first result set to be in memory</span>
            <span class="token keyword">select</span> <span class="token keyword">new</span>
            <span class="token punctuation">{</span>
                Table <span class="token operator">=</span> data<span class="token punctuation">.</span>Table<span class="token punctuation">,</span>
                Seating <span class="token operator">=</span> data<span class="token punctuation">.</span>Seating<span class="token punctuation">,</span>
                CommonBilling <span class="token operator">=</span> <span class="token keyword">from</span> info <span class="token keyword">in</span> data<span class="token punctuation">.</span>WalkIns<span class="token punctuation">.</span><span class="token function">Union</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>Reservations<span class="token punctuation">)</span>
                                <span class="token keyword">select</span> <span class="token keyword">new</span> <span class="token comment">// info</span>
                                <span class="token punctuation">{</span>
                                    BillID <span class="token operator">=</span> info<span class="token punctuation">.</span>BillID<span class="token punctuation">,</span>
                                    BillTotal <span class="token operator">=</span> info<span class="token punctuation">.</span>BillItems<span class="token punctuation">.</span><span class="token function">Sum</span><span class="token punctuation">(</span>bi <span class="token operator">=</span><span class="token operator">&gt;</span> bi<span class="token punctuation">.</span>Quantity <span class="token operator">*</span> bi<span class="token punctuation">.</span>SalePrice<span class="token punctuation">)</span><span class="token punctuation">,</span>
                                    Waiter <span class="token operator">=</span> info<span class="token punctuation">.</span>Waiter<span class="token punctuation">.</span>FirstName<span class="token punctuation">,</span>
                                    Reservation <span class="token operator">=</span> info<span class="token punctuation">.</span>Reservation
                                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
step2<span class="token punctuation">.</span><span class="token function">Dump</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>LinqPad - Step 3 - Get just the first CommonBilling item LinqPad Code</li></ul> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// Step 3 - Get just the first CommonBilling item</span>
<span class="token comment">//         (presumes no overlaps can occur - i.e., two groups at the same table at the same time)</span>
<span class="token keyword">var</span> step3 <span class="token operator">=</span> <span class="token keyword">from</span> data <span class="token keyword">in</span> step2<span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">select</span> <span class="token keyword">new</span>
            <span class="token punctuation">{</span>
                Table <span class="token operator">=</span> data<span class="token punctuation">.</span>Table<span class="token punctuation">,</span>
                Seating <span class="token operator">=</span> data<span class="token punctuation">.</span>Seating<span class="token punctuation">,</span>
                Taken <span class="token operator">=</span> data<span class="token punctuation">.</span>CommonBilling<span class="token punctuation">.</span><span class="token function">Count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token comment">// .FirstOrDefault() is effectively &quot;flattening&quot; my collection of 1 item into a </span>
                <span class="token comment">// single object whose properties I can get in step 4 using the dot (.) operator</span>
                CommonBilling <span class="token operator">=</span> data<span class="token punctuation">.</span>CommonBilling<span class="token punctuation">.</span><span class="token function">FirstOrDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
step3<span class="token punctuation">.</span><span class="token function">Dump</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>LinqPad - Step 4 - Build our intended seating summary info var step4 = from data in step3 LinqPad Code</li></ul> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// Step 4 - Build our intended seating summary info</span>
<span class="token keyword">var</span> step4 <span class="token operator">=</span> <span class="token keyword">from</span> data <span class="token keyword">in</span> step3
            <span class="token keyword">select</span> <span class="token keyword">new</span> <span class="token comment">// SeatingSummary() // the DTO class to use in my BLL</span>
            <span class="token punctuation">{</span>
                Table <span class="token operator">=</span> data<span class="token punctuation">.</span>Table<span class="token punctuation">,</span>
                Seating <span class="token operator">=</span> data<span class="token punctuation">.</span>Seating<span class="token punctuation">,</span>
                Taken <span class="token operator">=</span> data<span class="token punctuation">.</span>Taken<span class="token punctuation">,</span>
                <span class="token comment">// use a ternary expression to conditionally get the bill id (if it exists)</span>
                BillID <span class="token operator">=</span> data<span class="token punctuation">.</span>Taken <span class="token operator">?</span>               <span class="token comment">// if(data.Taken)</span>
                            data<span class="token punctuation">.</span>CommonBilling<span class="token punctuation">.</span>BillID  <span class="token comment">// value to use if true</span>
                        <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">?</span><span class="token punctuation">)</span> <span class="token keyword">null</span><span class="token punctuation">,</span>               <span class="token comment">// value to use if false</span>
                BillTotal <span class="token operator">=</span> data<span class="token punctuation">.</span>Taken <span class="token operator">?</span> 
                            data<span class="token punctuation">.</span>CommonBilling<span class="token punctuation">.</span>BillTotal <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token keyword">decimal</span><span class="token operator">?</span><span class="token punctuation">)</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
                Waiter <span class="token operator">=</span> data<span class="token punctuation">.</span>Taken <span class="token operator">?</span> data<span class="token punctuation">.</span>CommonBilling<span class="token punctuation">.</span>Waiter <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
                ReservationName <span class="token operator">=</span> data<span class="token punctuation">.</span>Taken <span class="token operator">?</span>
                                    <span class="token punctuation">(</span>data<span class="token punctuation">.</span>CommonBilling<span class="token punctuation">.</span>Reservation <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span>
                                    data<span class="token punctuation">.</span>CommonBilling<span class="token punctuation">.</span>Reservation<span class="token punctuation">.</span>CustomerName <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                                <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token keyword">null</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
step4<span class="token punctuation">.</span><span class="token function">Dump</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">10/9/2018, 3:53:41 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/demos/eRestaurant/aspNet/frontDesk/reservations.html" class="prev">
          Displaying Reservations
        </a></span> <span class="next"><a href="/demos/eRestaurant/aspNet/frontDesk/occupiedTables.html">
          Occupied Tables
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/47.7b4ca8bb.js" defer></script><script src="/assets/js/app.b0ba34e2.js" defer></script>
  </body>
</html>
